"use strict";(self.webpackChunkreact_burger=self.webpackChunkreact_burger||[]).push([[556],{1556:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var s=n(2791),i=n(5287),r=n(6401),c=n(1413),a=n(2982),l=n(885),d=n(6814),u=n(8422);var o=n.p+"static/media/done.fd977731a4c2e670ac186d9e114ec152.svg",m=n(5610),_=n(6916),x=function(e){return e.order},h=function(e){return x(e).status},p=(0,_.P1)(h,(function(e){return"loading"===e})),g=(0,_.P1)(x,(function(e){return"failed"===e.status})),j={selectOrderNumber:function(e){return x(e).number},selectIsOrderLoading:p,selectIsOrderFailed:g,selectIsOrderSucceeded:(0,_.P1)(h,(function(e){return"succeeded"===e}))},f=n(7310),v=n(6284),N=n(2720),y=n(5472),b=n(2848),I="styles_burgerConstructor__8UUZk",C="styles_container__49V4j",V="styles_message__iUIek",Z="styles_bun__pnxUU",k="styles_ingredients__pMuNk",E="styles_ingredient__NoiWP",G="styles_panel__NnVmd",L="styles_price__1+PJr",D="styles_id__an0AX",O=n(184),R=function(){var e,t=(0,s.useState)(!1),n=(0,l.Z)(t,2),i=n[0],r=n[1],_=(0,y.TL)(),x=(0,y.hQ)();(0,s.useEffect)((function(){var e,t=null===(e=x.location.state)||void 0===e?void 0:e.burger;t&&_(f.V.actions.setState(t))}),[_,null===(e=x.location.state)||void 0===e?void 0:e.burger]);var h=v.gh.useIngredients().entities,p=f.V.useBurger({ingredientsEntities:h}),g=p.state,R=p.bun,U=p.ingredients,P=p.totalPrice,S=(0,y.CG)(j.selectOrderNumber),T=(0,y.CG)(j.selectIsOrderLoading),A=(0,y.CG)(j.selectIsOrderFailed),B=(0,u.L)({accept:N.GC.BURGER_INGREDIENT,drop:function(e){var t=e.id,n=h[t];void 0!==n&&("bun"===n.type?_(f.V.actions.setBun(t)):_(f.V.actions.addIngredient(t)))}}),F=(0,l.Z)(B,2)[1],M=function(){r(!1)},Y=function(e,t){_(f.V.actions.moveIngredient(e,t))},w=!!R,z=!!U.length,K=w&&z;return(0,O.jsxs)("div",{className:"".concat(I),ref:F,children:[i&&(0,O.jsxs)(b.u_,{handleClose:M,children:[(0,O.jsx)(b.u_.Header,{handleClose:M}),(0,O.jsxs)(b.u_.Content,{children:[T&&(0,O.jsx)("p",{className:"mt-30 mb-30 ml-10 mr-10 text text_type_main-default",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0432\u0430\u0448 \u0437\u0430\u043a\u0430\u0437."}),A&&(0,O.jsx)("p",{className:"mt-30 mb-30 ml-10 mr-10 text text_type_main-default",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0438 \u043c\u044b \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0432\u0430\u0448 \u0437\u0430\u043a\u0430\u0437. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."}),!T&&!A&&S&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("p",{className:"mt-30 text text_type_digits-large ".concat(D),children:S}),(0,O.jsx)("p",{className:"mt-8 text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,O.jsx)("img",{className:"mt-15",src:o,alt:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d"}),(0,O.jsx)("p",{className:"mt-15 text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),(0,O.jsx)("p",{className:"mt-2 mb-30  text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})]}),(0,O.jsxs)("div",{className:"ml-4 ".concat(C),children:[w&&(0,O.jsx)("div",{className:"ml-8 ".concat(Z),children:(0,O.jsx)(d.DY,{text:"".concat(R.name," (\u0432\u0435\u0440\u0445)"),thumbnail:R.image,price:R.price,type:"top",isLocked:!0})}),!K&&(0,O.jsx)("div",{className:V,children:(0,O.jsx)("p",{className:"mt-8 text text_type_main-medium text_color_inactive",children:z?"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043a\u0443":w?"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443 \u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b"})}),z&&(0,O.jsx)("ul",{className:"".concat(k," mt-10 scroll"),children:U.map((function(e,t){e.id;var n=e.uid,s=e.data,i=s.image,r=s.price,c=s.name;return(0,O.jsx)("li",{className:"mt-4 mb-4",children:(0,O.jsx)(b.W8,{index:t,handleMove:Y,children:(0,O.jsxs)("div",{className:E,children:[(0,O.jsx)(d.Vn,{type:"primary"}),(0,O.jsx)(d.DY,{text:c,thumbnail:i,price:r,handleClose:function(){return function(e){_(f.V.actions.removeIngredient(e))}(t)}})]})})},n)}))}),w&&(0,O.jsx)("div",{className:"ml-8 ".concat(Z),children:(0,O.jsx)(d.DY,{text:"".concat(R.name," (\u043d\u0438\u0437)"),thumbnail:R.image,price:R.price,type:"bottom",isLocked:!0})})]}),(0,O.jsxs)("div",{className:"pt-10 pb-10 pr-4 ".concat(G),children:[(0,O.jsxs)("div",{className:"mr-10 ".concat(L),children:[(0,O.jsx)("p",{className:"mr-2 text text_type_digits-medium",children:P}),(0,O.jsx)(d.rm,{type:"primary"})]}),(0,O.jsx)(d.zx,{type:"primary",size:"large",htmlType:"button",onClick:function(){if(K){var e=null===U||void 0===U?void 0:U.map((function(e){return e.data._id})),t=R._id;r(!0);var n=[t].concat((0,a.Z)(e),[t]);_(m.d(n)).unwrap().then((function(e){var t=e.message;e.success?(_(f.V.actions.reset()),x.replace((0,c.Z)((0,c.Z)({},x.location),{},{state:{}}))):t===N.Vm.INVALID_TOKEN&&x.push({pathname:"/login",state:{from:(0,c.Z)((0,c.Z)({},x.location),{},{state:{burger:g}})}})}))}},disabled:!K,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},U=n(1067),P=function(e){var t=e.ingredient,n=e.children,s=(0,U.c)({type:N.GC.BURGER_INGREDIENT,item:{id:t._id}}),i=(0,l.Z)(s,2)[1];return(0,O.jsx)("div",{ref:i,children:n})},S="styles_burgerIngredients__QADYs",T="styles_tabs__RUaAV",A="styles_categories__gseuY",B="styles_ingredients__rhv5G",F=function(e){var t=e.groups,n=(0,s.useState)(null),i=(0,l.Z)(n,2),r=i[0],a=i[1],u=(0,s.useRef)(null),o=f.V.useBurgerCounts(),m=(0,y.S1)({root:u.current,rootMargin:"-50% 0px"}),_=m.register,x=m.current,h=m.elementsRefs;(0,s.useEffect)((function(){a(x)}),[x]);var p=function(e){var t,n;a(e),null===(t=h[e])||void 0===t||null===(n=t.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})};return(0,O.jsxs)("section",{className:S,children:[(0,O.jsx)("h1",{className:"mt-10 mb-5 heading text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),(0,O.jsx)("div",{className:"mb-10",children:(0,O.jsx)("ul",{className:"".concat(T),children:t.map((function(e,t){var n=(0,l.Z)(e,1)[0];return(0,O.jsx)("li",{children:(0,O.jsx)(d.OK,{active:r==="".concat(t),value:"".concat(t),onClick:p,children:n})},t)}))})}),(0,O.jsx)("ul",{className:"".concat(A," scroll"),children:t.map((function(e,t){var n=(0,l.Z)(e,2),s=n[0],i=n[1];return(0,O.jsxs)("li",(0,c.Z)((0,c.Z)({},_("".concat(t))),{},{children:[(0,O.jsx)("h2",{className:"text text_type_main-medium",children:s}),(0,O.jsx)("div",{className:"pt-6 pr-2 pb-10 pl-4",children:(0,O.jsx)("ul",{className:"".concat(B),children:i.map((function(e){return(0,O.jsx)("li",{children:(0,O.jsx)(b.tL,{path:"/ingredient/".concat(e._id),children:(0,O.jsx)(P,{ingredient:e,children:(0,O.jsx)(v.u3,{ingredient:e,count:o(e._id)})})})},e._id)}))})})]}),t)}))})]})},M="styles_layout__bIuCz",Y="styles_message__oQhDK",w=function(){var e=(0,y.TL)();(0,s.useEffect)((function(){e(v.gh.actions.getIngredientsAsync())}),[e]);var t=v.gh.useIngredients(),n=t.isSucceeded,c=t.isLoading,a=t.isFailed,l=t.ingredients,d=(0,s.useMemo)((function(){var e=function(e){return(0,y.vM)(e,(function(e){return e.type}))}(l);return[["\u0411\u0443\u043b\u043a\u0438",e.bun],["\u0421\u043e\u0443\u0441\u044b",e.sauce],["\u041d\u0430\u0447\u0438\u043d\u043a\u0438",e.main]]}),[l]);return(0,O.jsxs)("main",{className:M,children:[c&&(0,O.jsx)(b.Nc,{}),a&&(0,O.jsx)("p",{className:"text text_type_main-large text_color_inactive ".concat(Y),children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),n&&(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(i.W,{backend:r.PD,children:[(0,O.jsx)(F,{groups:d}),(0,O.jsx)("div",{className:"ml-10 pt-25",children:(0,O.jsx)(R,{})})]})})]})}}}]);
//# sourceMappingURL=556.241a22fa.chunk.js.map